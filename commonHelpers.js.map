{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst launchBtn = document.querySelector('[data-start]');\nconst dateInput = document.querySelector('#datetime-picker');\nlaunchBtn.disabled = true;\n\nflatpickr(dateInput, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose: onClose,\n});\n\nfunction onClose(selectedDates) {\n  const userSelectedDate = selectedDates[0];\n  const currentDate = new Date();\n\n  if (userSelectedDate < currentDate) {\n    displayError('Illegal operation');\n    launchBtn.disabled = true;\n  } else {\n    launchBtn.disabled = false;\n  }\n}\n\nfunction displayError(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n    backgroundColor: '#ef4040',\n  });\n}\n\nlet timerInterval;\n\nlaunchBtn.addEventListener('click', () => {\n  const endDate = new Date(dateInput.value).getTime();\n\n  launchBtn.disabled = true;\n  dateInput.disabled = true;\n\n  updateTimer(endDate);\n\n  timerInterval = setInterval(() => {\n    updateTimer(endDate);\n  }, 1000);\n});\n\nfunction updateTimer(endDate) {\n  const timeDifference = getTimeDifference(endDate);\n\n  if (timeDifference <= 0) {\n    clearInterval(timerInterval);\n    timerInterval = null;\n    displayMessage(\"Time's up!\");\n    dateInput.disabled = false;\n    return;\n  }\n\n  const { days, hours, minutes, seconds } = convertMs(timeDifference);\n\n  document.querySelector('[data-days]').textContent = addLeadingZero(days);\n  document.querySelector('[data-hours]').textContent = addLeadingZero(hours);\n  document.querySelector('[data-minutes]').textContent =\n    addLeadingZero(minutes);\n  document.querySelector('[data-seconds]').textContent =\n    addLeadingZero(seconds);\n}\n\nfunction getTimeDifference(endDate) {\n  const currentTime = new Date().getTime();\n  const endTime = new Date(endDate).getTime();\n  return endTime - currentTime;\n}\n\nfunction displayMessage(message) {\n  iziToast.info({\n    title: 'Done',\n    message: message,\n    position: 'topRight',\n  });\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, 0);\n}"],"names":["launchBtn","dateInput","flatpickr","onClose","selectedDates","displayError","message","iziToast","timerInterval","endDate","updateTimer","timeDifference","getTimeDifference","displayMessage","days","hours","minutes","seconds","convertMs","addLeadingZero","currentTime","ms","value"],"mappings":"2GAKA,MAAMA,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAY,SAAS,cAAc,kBAAkB,EAC3DD,EAAU,SAAW,GAErBE,EAAUD,EAAW,CACnB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAASE,CACX,CAAC,EAED,SAASA,EAAQC,EAAe,CACLA,EAAc,CAAC,EACpB,IAAI,MAGtBC,EAAa,mBAAmB,EAChCL,EAAU,SAAW,IAErBA,EAAU,SAAW,EAEzB,CAEA,SAASK,EAAaC,EAAS,CAC7BC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EACT,SAAU,WACV,gBAAiB,SACrB,CAAG,CACH,CAEA,IAAIE,EAEJR,EAAU,iBAAiB,QAAS,IAAM,CACxC,MAAMS,EAAU,IAAI,KAAKR,EAAU,KAAK,EAAE,UAE1CD,EAAU,SAAW,GACrBC,EAAU,SAAW,GAErBS,EAAYD,CAAO,EAEnBD,EAAgB,YAAY,IAAM,CAChCE,EAAYD,CAAO,CACpB,EAAE,GAAI,CACT,CAAC,EAED,SAASC,EAAYD,EAAS,CAC5B,MAAME,EAAiBC,EAAkBH,CAAO,EAEhD,GAAIE,GAAkB,EAAG,CACvB,cAAcH,CAAa,EAC3BA,EAAgB,KAChBK,EAAe,YAAY,EAC3BZ,EAAU,SAAW,GACrB,MACD,CAED,KAAM,CAAE,KAAAa,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUP,CAAc,EAElE,SAAS,cAAc,aAAa,EAAE,YAAcQ,EAAeL,CAAI,EACvE,SAAS,cAAc,cAAc,EAAE,YAAcK,EAAeJ,CAAK,EACzE,SAAS,cAAc,gBAAgB,EAAE,YACvCI,EAAeH,CAAO,EACxB,SAAS,cAAc,gBAAgB,EAAE,YACvCG,EAAeF,CAAO,CAC1B,CAEA,SAASL,EAAkBH,EAAS,CAClC,MAAMW,EAAc,IAAI,KAAM,EAAC,QAAO,EAEtC,OADgB,IAAI,KAAKX,CAAO,EAAE,QAAO,EACxBW,CACnB,CAEA,SAASP,EAAeP,EAAS,CAC/BC,EAAS,KAAK,CACZ,MAAO,OACP,QAASD,EACT,SAAU,UACd,CAAG,CACH,CAEA,SAASY,EAAUG,EAAI,CAMrB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAC1BN,EAAQ,KAAK,MAAOM,EAAK,MAAO,IAAI,EACpCL,EAAU,KAAK,MAAQK,EAAK,MAAO,KAAQ,GAAM,EACjDJ,EAAU,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASE,EAAeG,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,CAAC,CACpC"}